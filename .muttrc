# Display the fields in this order
hdr_order date subkect from to cc

set hostname=thesquareplanet.com
set attribution="%n wrote:"
set beep=no
set beep_new=yes
set compose_format="-- Compose [~%lb, attachments: %a]%>~"
set crypt_autosign=yes
set crypt_replysign=yes
set crypt_replysignencrypted=yes
set date_format="!%b %d, %Y at %I:%M%p %Z"
set imap_idle=yes
set index_format="%3C %Z %{%b %d} %s %* (%L)"
set locale="en_US.UTF-8"
set header_cache="~/.mutt/cache/headers"
set message_cachedir="~/.mutt/cache/messages"
set certificate_file="~/.mutt/certificates"
set mail_check=60
set timeout=10 # Update folder status often when inactive
set editor='vim'
set pgp_auto_decode=yes
set realname="Jon Gjengset";
# set send_charset="us-ascii:iso-8859-1:utf-8"
set send_charset="us-ascii:utf-8"
set ssl_force_tls=yes
set wrap=80
set wait_key=no

set sort="threads"
set strict_threads="yes"
set collapse_unread="no"
set sort_browser="reverse-date"
set sort_aux="reverse-last-date-received"
bind index - collapse-thread
bind index _ collapse-all

# set envelope_from_address=""
# set from=""
# set header=no
# set mail_check=5
ignore *
unignore from to date subject cc X-Bugzilla-Who

bind index G imap-fetch-mail
bind index b search-opposite

# Pager
bind pager j next-line
bind pager k previous-line
bind pager H display-toggle-weed
macro compose m '<edit-from><kill-line>Jon Gjengset <jfrg@mit.edu><enter><edit-reply-to><kill-line>Jon Gjengset <jon@thesquareplanet.com><enter>'

# Convenience
# Jump to archive
macro index A '<change-folder>=Archive<tab><enter>'
# Jump to sent
macro index O '<change-folder>=Sent<tab><enter>'
# Jump to inbox
macro index I '<change-folder>=<enter>'
# Save (tagged or current) to archive
macro index S ';<save-message>=Archive<tab><enter><enter>'

# Make deletion non-permanent
macro index d 's=Trash<enter><enter>' "Move message to trash"
macro pager d 's=Trash<enter><enter>' "Move message to trash"
# and expunge explicit
macro index x '<delete-message>' "Delete message permanently"
macro pager x '<delete-message>' "Delete message permanently"

auto_view text/html
alternative_order text/plain text/enriched text/html

# Other me's
alternates jon@*.tsp.io jon@*.thesquareplanet.com jon@*.gjengset.com jfrg@mit.edu j.gjengset@cs.ucl.ac.uk

# switch to default account on startup
source ~/.mutt/account.local

macro index <f1> '<sync-mailbox><enter-command>source ~/.mutt/account.fm<enter><change-folder>!<enter>'
macro index <f2> '<sync-mailbox><enter-command>source ~/.mutt/account.aptoma<enter><change-folder>!<enter>'
macro index <f12> '<sync-mailbox><enter-command>source ~/.mutt/account.local<enter><change-folder>!<enter>'

# lists
subscribe getmail@lists.pyropus.ca gnuplot-beta@lists.sourceforge.net \
	nets@cs.ucl.ac.uk snarg@cs.ucl.ac.uk zed-user@googlegroups.com \
	zeromq-dev@lists.zeromq.org g9@lists.csail.mit.edu \
	sp-4south-res@mit.edu social@csail.mit.edu assassins-guild@mit.edu \
	newgrads1415@lists.csail.mit.edu prezfellow@mit.edu up@mit.edu \
	seminars@csail.mit.edu csail-related@mit.edu iso-broadcast@mit.edu \
	ult-team-new@mit.edu eecsnew14@MIT.EDU	csail-all@lists.csail.mit.edu \
	csail-related@lists.csail.mit.edu calendar@csail.mit.edu \
	vultures-request@lists.csail.mit.edu social@lists.csail.mit.edu \
	csail-internal@lists.csail.mit.edu csail-related@csail.mit.edu \
	all-grad@mit.edu pdos@csail.mit.edu g9@csail.mit.edu pdos@pdos.csail.mit.edu

# aliases
set alias_file=~/.mutt/aliases
source $alias_file

source ~/.mutt/gpg
set pgp_use_gpg_agent=yes

color normal        brightblue      default
color error         red             default
color tilde         white           default
color message       cyan            default
color markers       red             black
color attachment    black           default
color search        brightmagenta   default
color status        brightblue      white
color indicator     brightwhite     yellow
color tree          yellow          default

color hdrdefault    brightcyan      default
color header        blue      default         "^(From)"
color header        blue            default         "^(Subject)"
color   signature   color243        default

color bold          white           default
color underline     white           default
color normal        default         default

#color   body        color137        default [\-\.+_a-zA-Z0-9]+@[\-\.a-zA-Z0-9]+
color   body        color137        default ((https?|ftp)://|www)+[\-\.\;@,/%~_:?&=\#a-zA-Z0-9+*]+

color quoted        blue            default
color quoted1       cyan            default
color quoted2       yellow          default
color quoted3       red             default
color quoted4       brightred       default

color   tilde       color39         default
color   tree        color211        default
color   attachment  brightcolor243  default

color   index       brightcolor15   default ~N
color   index       brightcolor15   default ~O
color   index       yellow          default ~l
color   index       color243        default ~P
color   index       brightcolor221  default ~F
color   index       brightcolor39   default ~T
color   index       color196        default ~D

# Colorize inline diffs, really helpful for LKML or other mailing lists where
# mails frequently include patches.
color   body        color15   default '^diff .*'
#color   body        color15   default '^[Ii]{1}ndex .*'
#color   body        color15   default '^=+$'
#color   body        color15   default '^(---|\+\+\+) .*'
color   body        color15   default '^@@ .*'
color   body        green           default '^\+([^\+].*)?$'
color   body        red             default '^-([^-].*)?$'

# Colorize PGP signatures
color body          red             default         "(BAD signature)"
color body          green           default         "(Good signature)"

#source ~/dev/others/solarized/mutt-colors-solarized/mutt-colors-solarized-light-16.muttrc
